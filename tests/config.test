# -*- tcl -*-
# Commands covered:  pkgconfig
#
# This file contains a collection of tests for one or more of the Tcl
# built-in commands.  Sourcing this file into Tcl runs the tests and
# generates output for errors.  No output means no errors were found.
#
# Copyright (c) 1991-1993 The Regents of the University of California.
# Copyright (c) 1994-1996 Sun Microsystems, Inc.
# Copyright (c) 1998-1999 by Scriptics Corporation.
#
# See the file "license.terms" for information on usage and redistribution
# of this file, and for a DISCLAIMER OF ALL WARRANTIES.
#
# RCS: @(#) $Id$

if {[lsearch [namespace children] ::tcltest] == -1} {
    package require tcltest
    namespace import -force ::tcltest::*
}

test pkgconfig-1.1 {query keys} {
    lsort [::tcl::pkgconfig list]
} {64bit compile_debug compile_stats debug exec_prefix,install exec_prefix,runtime mem_debug optimized prefix,install prefix,runtime profiled threaded}

test pkgconfig-1.2 {query keys multiple times} {
    string compare [::tcl::pkgconfig list] [::tcl::pkgconfig list]
} 0

test pkgconfig-1.3 {query value multiple times} {
    string compare \
	    [::tcl::pkgconfig get exec_prefix,install] \
	    [::tcl::pkgconfig get exec_prefix,install]
} 0


test pkgconfig-2.0 {error: missing subcommand} {
    catch {::tcl::pkgconfig} msg
    set msg
} {wrong # args: should be "list | get key"}

test pkgconfig-2.1 {error: illegal subcommand} {
    catch {::tcl::pkgconfig foo} msg
    set msg
} {bad subcommand "foo": must be get or list}

test pkgconfig-2.2 {error: list with arguments} {
    catch {::tcl::pkgconfig list foo} msg
    set msg
} {wrong # args: should be "list"}

test pkgconfig-2.3 {error: get without arguments} {
    catch {::tcl::pkgconfig get} msg
    set msg
} {wrong # args: should be "get key"}

test pkgconfig-2.4 {error: query unknown key} {
    catch {::tcl::pkgconfig get foo} msg
    set msg
} {key not known}

test pkgconfig-2.5 {error: query with to many arguments} {
    catch {::tcl::pkgconfig get foo bar} msg
    set msg
} {wrong # args: should be "list | get key"}

# cleanup
::tcltest::cleanupTests
return












